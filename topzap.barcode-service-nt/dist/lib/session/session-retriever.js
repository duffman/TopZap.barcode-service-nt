'use strict';Object.defineProperty(exports,'__esModule',{value:true});const request=require('request');const cookie_jar_1=require('./cookie-jar');class SessionRetriever{getPHPSessionId(){let options={uri:'https://zapper.co.uk/',headers:{'user-agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36','cache-control':'no-cache','accept':'*/*'},method:'GET'};let newRequest=request.defaults();return new Promise((resolve,reject)=>{newRequest(options,(error,response,body)=>{if(!error&&response.statusCode==200){let reqCookie=response.headers['set-cookie'];if(reqCookie!=null){let jar=new cookie_jar_1.CookieJar(reqCookie);let sessId=jar.getPHPSession();resolve(sessId);}else{reject(new Error('PHP Session Id Missing'));}}else{reject(error);}});});}initSessionId(id){let options={uri:'https://zapper.co.uk/',headers:{'user-agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36','cache-control':'no-cache','accept':'*/*','cookie':id},method:'GET'};let newRequest=request.defaults();return new Promise((resolve,reject)=>{newRequest(options,(error,response,body)=>{if(!error&&response.statusCode==200){let reqCookie=response.headers['set-cookie'];if(reqCookie!=null){let jar=new cookie_jar_1.CookieJar(reqCookie);let sessId=jar.getPHPSession();resolve(sessId);}else{reject(new Error('PHP Session Id Missing'));}}else{reject(error);}});});}}exports.SessionRetriever=SessionRetriever;let app=new SessionRetriever();app.getPHPSessionId().then(res=>{}).catch(err=>{console.log('ERO',err);});