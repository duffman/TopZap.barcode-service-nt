'use strict';Object.defineProperty(exports,'__esModule',{value:true});const request=require('request');const momox_app_data_1=require('./momox-app-data');class MomoxMobileWorker{constructor(debugMode=false){this.debugMode=debugMode;this.baseRequest=request.defaults({'baseUrl':'https://api.momox.co.uk/api/v3/','headers':{'User-Agent':'momoxSwift/3.5.1 (com.momox.momox; build:9; iOS 10.1.1) Alamofire/4.7.3','X-API-TOKEN':'88cbc56dadd49640d9b9618cc49573afaa70dbcf','X-MARKETPLACE-ID':'momox_uk'},'gzip':true,'json':true});}getCart(cookieJar){return new Promise((resolve,reject)=>{this.baseRequest.get(`cart/`,{'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{resultData=momox_app_data_1.Convert.toMomoxCartResult(body);resolve(resultData);}catch(err){resolve(null);}}});});}addToCart(ean,cookieJar){return new Promise((resolve,reject)=>{this.baseRequest.post('cart/items/',{'body':{'ean':ean},'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{resultData=momox_app_data_1.Convert.toMomoxCartResult(body);resolve(resultData);}catch(err){resolve(null);}}});});}search(ean,cookieJar=null){let scope=this;if(cookieJar===null){cookieJar=request.jar();}return new Promise((resolve,reject)=>{this.baseRequest.get(`find/media/ean/${ean}/`,{'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{console.log('### body ::',body);resultData=momox_app_data_1.Convert.toMomoxResult(body);resolve(resultData);}catch(err){resolve(null);}}});});}removeFromCart(ean,cookieJar){return new Promise((resolve,reject)=>{this.baseRequest.delete(`cart/items/${ean}/`,{'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{resultData=momox_app_data_1.Convert.toMomoxCartResult(body);resolve(resultData);}catch(err){resolve(null);}}});});}}exports.MomoxMobileWorker=MomoxMobileWorker;