'use strict';Object.defineProperty(exports,'__esModule',{value:true});const request=require('request');const momox_data_1=require('./momox-data');class MomoxWebWorker{constructor(){this.baseUrl='https://api.momox.co.uk/';this.baseRequest=request.defaults({'baseUrl':this.baseUrl+'api/v3/','headers':{'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36','X-API-TOKEN':'2231443b8fb511c7b6a0eb25a62577320bac69b6','X-MARKETPLACE-ID':'momox_uk'},'gzip':true,'json':true});}getCart(cookieJar){return new Promise((resolve,reject)=>{this.baseRequest.get(`cart/`,{'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{resultData=momox_data_1.MomoxDataConvert.toMomoxCartResult(JSON.stringify(body));resolve(resultData);}catch(err){resolve(null);}}});});}addToCart(ean,cookieJar){return new Promise((resolve,reject)=>{this.baseRequest.post('cart/items/',{'body':{'ean':ean},'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{resultData=momox_data_1.MomoxDataConvert.toMomoxCartResult(JSON.stringify(body));resolve(resultData);}catch(err){resolve(null);}}});});}search(ean,cookieJar){if(!cookieJar){cookieJar=request.jar();}return new Promise((resolve,reject)=>{this.baseRequest.get(`find/media/ean/${ean}/`,{'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{resultData=momox_data_1.MomoxDataConvert.toMomoxResult(JSON.stringify(body));resolve(resultData);}catch(err){resolve(null);}}});});}removeFromCart(ean,cookieJar){return new Promise((resolve,reject)=>{this.baseRequest.delete(`cart/items/${ean}/`,{'jar':cookieJar},function optionalCallback(err,httpResponse,body){if(err){reject(err);}else{let resultData;try{resultData=momox_data_1.MomoxDataConvert.toMomoxCartResult(JSON.stringify(body));resolve(resultData);}catch(err){resolve(null);}}});});}}exports.MomoxWebWorker=MomoxWebWorker;